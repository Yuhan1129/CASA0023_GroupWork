<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Rapid Identification Platform for Urban Illegal Buildings Based on Remote Sensing in Istanbul</title>
    <meta charset="utf-8" />
    <meta name="author" content="osyz" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/mark.js/mark.min.js"></script>
    <link href="libs/xaringanExtra-search/search.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-search/search.js"></script>
    <script>window.addEventListener('load', function() { window.xeSearch = new RemarkSearch({"position":"bottom-left","caseSensitive":false,"showIcon":true,"autoSearch":true}) })</script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: inverse, center, title-slide, middle











background-image: url("img/cover.png")
background-size: cover
background-position: center

# Rapid Identification Platform for Urban Illegal Buildings Based on Remote Sensing in Istanbul

### *CASA0023 Group Presentation*

### osyz

#### 20/03/2023

---

class: inverse, left, middle

# *Outline*


1. City Problem
2. Approach
3. Workflow
4. Project Management
5. Conclusion

---

class: inverse, center, middle

# City Problem

---

class: left, left

### City Problem

#### Brief summary of illegal buildings problem
* &lt;font size = 3&gt; With the **rapid urbanization** around the world, **illegal building is one of the crucial problem happened or still happening in many other countries** &lt;a name=cite-akrofiSustainableUrbanDevelopment2019b&gt;&lt;/a&gt;&lt;a name=cite-romanoIllegalBuildingItaly2021a&gt;&lt;/a&gt;([Akrofi, Avogo, and Wedam, 2019](#bib-akrofiSustainableUrbanDevelopment2019b); [Romano, Zullo, Fiorini, and Marucci, 2021](#bib-romanoIllegalBuildingItaly2021a)).

* &lt;font size = 3&gt; The problem of **illegal buildings in Turkey**, which **was brought to wide attention by the devastating earthquake in early February this year again**, is a very serious and unsustainable development issue, and its impact is huge &lt;a name=cite-uzunUpgradingIllegalSettlements2015a&gt;&lt;/a&gt;([Uzun and Celik Simsek, 2015](#bib-uzunUpgradingIllegalSettlements2015a)).

* &lt;font size = 3&gt; **Istanbul**, Turkey's largest and most populous city, **also faced significant challenges related to illegal buildings**. The city has struggled to cope with urbanization and growing demand for housing, which has led to uncontrolled and informal buildings.

.pull-left[
* **Illegal buildings: **
&lt;font size = 3&gt; Buildings located in Turkey without permission and registration and does not conform to the local urban cadastral plan &lt;a name=cite-bayraktarLANDREGISTRYCADASTRE2006a&gt;&lt;/a&gt;([BAYRAKTAR and BAKICI, 2006](#bib-bayraktarLANDREGISTRYCADASTRE2006a); [Uzun and Celik Simsek, 2015](#bib-uzunUpgradingIllegalSettlements2015a))
]
.pull-right[
&lt;img src="img/earthquake_image.jpg" width="80%" style="display: block; margin: auto;" /&gt;
.small[Fig. Buildings after earthquake in Turkey February, 2023.
Source: [**BBC**](https://www.bbc.co.uk/news/64568826)
]
]

---

class: left, left

### City Problem

#### Negative Impact of illegal buildings

.panelset[
.panel[.panel-name[Environment]
* **Encroachment on nature:** nature reserves, rivers, forests &lt;a name=cite-jovanovicEnvironmentalImpactIllegal2019a&gt;&lt;/a&gt;([Jovanovic, 2019](#bib-jovanovicEnvironmentalImpactIllegal2019a))
&lt;img src="img/illegal_building_environment.png" width="60%" style="display: block; margin: auto;" /&gt;
.small[Fig. Illegal buildings close to river.
Source: &lt;a name=cite-feliceRankingIllegalBuildings2019a&gt;&lt;/a&gt;[Felice (2019)](#bib-feliceRankingIllegalBuildings2019a)
]
]

.panel[.panel-name[Economic]
* Exacerbating urban **poverty and high unemployment rate** &lt;a name=cite-ahsanInformalHousingApproaches2010a&gt;&lt;/a&gt;([Ahsan and Quamruzzaman, 2010](#bib-ahsanInformalHousingApproaches2010a)) 

* Undermine **tourism development** &lt;a name=cite-ozdemirIzmirDestinasyonuNda2018a&gt;&lt;/a&gt;([Özdemir and Erdoğan, 2018](#bib-ozdemirIzmirDestinasyonuNda2018a))

* Distorting markets and creating **unfair competition**

]

.panel[.panel-name[Society and population]
* **Huge inter migration** &lt;a name=cite-zanfiCittaAbusivaContemporary2013a&gt;&lt;/a&gt;([Zanfi, 2013](#bib-zanfiCittaAbusivaContemporary2013a))

* **Social safety issue:** disturb the social order, which makes government to be difficult to plan and manage &lt;a name=cite-peroldArchitectureSouthernAfrican2019a&gt;&lt;/a&gt;([Perold, Donaldson, and Devisch, 2019](#bib-peroldArchitectureSouthernAfrican2019a); [Romano, Zullo, Fiorini et al., 2021](#bib-romanoIllegalBuildingItaly2021a))

* **Human safety issue:** the quality of illegal buildings can not be guaranteed and may threaten the life and health of residents (e.g.earthquake, flood, etc) &lt;a name=cite-hortonTurkeyEarthquakeWhy2023a&gt;&lt;/a&gt;([Horton and Armstrong, 2023](#bib-hortonTurkeyEarthquakeWhy2023a))

* **Property of society and human** cannot be guaranteed: higher crime rate &lt;a name=cite-varolDetectionIllegalConstructions2019a&gt;&lt;/a&gt;([Varol, Yılmaz, Maktav, Bayburt, and Gürdal, 2019](#bib-varolDetectionIllegalConstructions2019a))
]
]

---

class: left, left

### City Problem

#### Relevant global and local policy

.panelset[
.panel[.panel-name[Global policy]

**1.United Nation: The Sustainable Development Goals (SDGs)**
* .small[**Goal 11:** ***"Make cities and human settlements inclusive, safe, resilient, and sustainable."***]
* .small[Target 11.1: By 2030, ensure access for all to adequate, safe and affordable housing and basic services and upgrade slums]
* .small[Indicator 11.1.1: Proportion of urban population living in slums, informal settlements or inadequate housing]

**2.United Nation: The New Urban Agenda**
* .small[Increase the allocation of financial and human resources, as appropriate, to ***address the problem of illegal construction in a sustainable manner*** so that residents live in safe, inclusive, accessible, green and quality Spaces, and should promote tenure security and its regularization, as well as conflict prevention and timely mediation.]
]

.panel[.panel-name[National policy]

#### **1.2012-"The urban regeneration law"**

*  A legal framework for the renewal and restoration and protection of cultural sites in areas considered unsafe or substandard in urban centers. It also includes &lt;font color black&gt; ***measures to tackle illegal buildings, such as property and legal alternatives for residents living in illegal structures where unsafe structures are demolished.***


#### **2.Construction Law (İmar Kanunu in Turkish) Article 42**

* Stricter building codes and ***increased fines and penalties for violators.***
.panel[.panel-name[City policy]
**1.Urban Planning Training and Capacity Development Programme for Resilient Istanbul:**

* Aims to support capacity development for the “Next Generation Participatory Planning Framework” in urban planning processes of the Municipality based on open government vision.
]
]
]

---

class: inverse, center, middle

# Approach

---

### Data

.pull-left[
**WorldView-3**
- Very High Resolution(VHR)
  - Multispectral(R,G,B,NIR) 1.24m
- Revisits less than one day
- Standard image products available
  - radiometrically corrected
  - sensor corrected
  - orthorectified and projected to the Earth’s Surface.
  
**Cadastral Digital Map**
- Land Registry and Cadastre Information System in Turkey
- Provide ownership and cadastral information in land registry
]

.pull-right[
&lt;img src="img/worldview3.jpeg" style="display: block; margin: auto;" /&gt;
.small[Figure.WorldView3 imagery. Source:[DigitalGlobe](https://worldview3.digitalglobe.com/)]

]

---

### Object-based Image Analysis

.panelset[
.panel[.panel-name[Image Segmentation]
**Multi-resolution segmentation(MRS)**
  - Extract reasonable objects that can be used in next steps
  
  - Three parameters to partition an image into objects: scale, shape, and compactness. 
  
**Spectral difference segmentation**
  - Merge neighboring image objects
  
    - if the difference between their layer mean intensities lower than the value given by the maximum spectral difference
  ]
  
.panel[.panel-name[Feature Selection]

27 features selected within eCognition for each object

&lt;img src="img/feature.png" width="1925" /&gt;
]

.panel[.panel-name[Classification]
Support Vector Machine with optimum feature selection to classify the objects as buildings or non-buildings(forest, green area, road and water). 

&lt;img src="img/classification.png" width="80%" style="display: block; margin: auto;" /&gt;
.small[Figure.Classification using SVM.Source:&lt;a name=cite-Norman_2021&gt;&lt;/a&gt;([Norman, Shahar, Mohamad, Rahim, Mohd, and Shafri, 2021](#bib-Norman_2021)) ]

]
]

---

### Identifying Illegal Buildings

.pull-left[

Compare the buildings in the classification map with cadastral digital map
  - The buildings that are contradict to cadastre would be identified illegal.


### Validation

- Visit the sites of the identified buildings
- Verify their legality using on-site inspections or by consulting with local authorities
]

.pull-right[

&lt;img src="img/cadastral.png" width="120%" /&gt;
.small[Figure.Ground truth cadastral data overlap with results. Source: &lt;a name=cite-rs13163150&gt;&lt;/a&gt;([Jovanović, Gavrilović, Sladić, Radulović, and Govedarica, 2021](#bib-rs13163150))]
]

---

class: inverse, center, middle

# Workflow

---

### Hardware preparation

.pull-left[

#### Component
The hardware infrastructure of the identification platform needs to be built, including *storage devices, computing devices, network devices, security devices*, etc. 

#### Service choice
However, in the early stage when the business scale is small, cloud servers, such as ***Amazon Web Services (AWS)***, can be used first. In the distant stage when the business scale expands a lot, the construction of local servers can be considered.
]

.pull-right[

&lt;img src="img/managed-aws-servers.jpg" width="100%" /&gt;
.small[ Fig. Amazon Web Services (AWS). Source:[Milletech](https://www.milletechinc.com/aws-service-atlanta.html)]
]

---

### Database construction

#### Remote sensing database
Store the acquired remote sensing image data on the server, and construct the ***remote sensing database*** after data pre-processing such as slicing and stitching. 

#### Basic geographic and planning database
Acquire data through relevant channels and construct a ***basic geographic and planning database***, containing TAKBIS (Land Registry and Cadastre Information System in Turkey), topography, structures, planning data, etc. 

#### Process database
Afterwards, using the data processing and analysis methods described above, unauthorised construction is identified and the resulting possible unauthorised construction sites are compared with the recorded registration data and planning data to identify unauthorised construction sites based on laws and regulations and to build a ***process database***.

---

### Use of the service platform

Based on each database, the image management platform, violation identification platform, collaborative office platform and spatial analysis platform are developed and integrated into ***one service platform***, and ***a visualised WebGIS client*** is established using the 3D model of the city to facilitate the use of the management staff. Based on this service platform, illegal buildings sites are investigated and dealt with.

.panelset[
.panel[.panel-name[Management]
***The image management platform*** provides management services for remote sensing image data.
]
 
.panel[.panel-name[Identification]
***The violation identification platform*** allows users to modify violation identification rules and provide feedback information after on-site investigation.
]

.panel[.panel-name[Office]
***The collaborative office platform*** provides office services such as violation point reporting, querying, processing and recording so that managers from different departments can clearly remedy violation points.
]

.panel[.panel-name[Analysis]
***The spatial analysis platform*** can analyse the spatial distribution characteristics of violation data in the city so that the construction of violation can be restricted in a more root cause manner at the macro policy level.
]
]

---
### Use of the service platform

#### Service platform workflow

&lt;img src="img/Workflow.png" width="100%" /&gt;

---

### Subsequent upgrades

#### Function

The application of remote sensing data in the field of investigating and dealing with urban violations is not limited to illegal buildings, but can also be applied to ***urban river encroachment***, ***loss of urban greenery***, ***illegal industrial discharge*** and so on. The platform has a complete process system, and these functions can be added to the platform and be used directly.

#### Grid management of remote sensing image data

Due to financial constraints, in the first phase, the analysis was conducted only for the central urban areas and areas with a high incidence of building violations.

In the long term, ***high frequency (once a month)*** of remote sensing data acquisition can be adopted for urban central areas and areas with high prevalence of illegal buildings, and ***low frequency (once every two months)*** can be adopted for suburban areas and areas with low prevalence of illegal buildings, so that the detection of illegal buildings can be carried out with the highest efficiency.

---

class: inverse, center, middle

# Project Management

---

### Work package

- **Package 1**

  - Meetings with stakeholders (government and public representatives)
  
  - Set questions
  
  - Establish projects


- **Package 2**

  - Collect data and establish a database
  
  - Build a service platform
  
  - Build a team


- **Package 3**

  - Deliver the software
  
  - Start trial operation

---

### Time

- Project approval: 15 days

- Platform construction: 4 months

- Trial operation: 1 months

- Total duration: 1 year

 ![](img/time.jpeg)
.small[Fig. Project Timeline]

---

### Cost

- Data: 20 (£/km²) \* 2570 (km²) \* 6 (time) = 308,400 (£)

![](img/cost.jpeg)
.small[Fig. Project estimate Cost]

---

### Risk and solutions

1. **Social risk**:

  - Being resisted by local residents
  
  - Bring short-term social instability and negative economic benefits
  
  *Solution*:
  
  - Fully discussion and publicize in initial stages
  
  - Open platform for the public.
    
2. **Technical risk**:

  - Data failure
  
  - Staff turnover
  
  *Solution*:
  
  - Ensure the availability of alternative data sources and technical staff.
  
---

class: inverse, center, middle

# Conclusion

---


### Conclusion
A platform that can regularly monitor illegal buildings and assist on-site investigation of illegal buildings.
![](img/5.1.png)
.small[Fig. Service platform. Source:[WEGIS](http://www.wegis.com.cn/#/illegalBuilding)]

---

### Benefit

- **Ensuring public safety**: Illegal building can lead to serious safety hazards for the occupants of the building and those in the surrounding area

- **Protecting property values**: Protect property values for residents and businesses in the area

- **Protect the environment**: Some illegal buildings are built in nature reserves, urban sewage pipes and other places of great environmental impact

- **Enforcing Building Codes and Regulations** : Deter future illegal building and encourage compliance with building codes and regulations

- **Save a lot of costs to deal with illegal buildings**

- **Save costs and reduce manpower**: Compared with traditional manual inspection, machine learning using remote sensing data reduces the time and labor required

- **Higher efficiency**: Testing is faster, allowing governments to respond more quickly

---


### Benefit

|policy | output | improvement
--------|---------|---------
International|The Sustainable Development Goals &amp; The New Urban Agenda| the violation identification platform |reducing the proportion of the urban population living in slums, informal settlements or inadequate housing
National|Urban Regeneration Law &amp; Construction Law|assist on-site investigation|enforcing building codes and regulations
City|Urban Planning Training and Capacity Development Programme for Resilient Istanbul|the collaborative office platform| ensure proactive participation of all inhabitants of Istanbul

---

### Limitation

- Illegal buildings that only change in height cannot be detected using this method.

- The method takes more time to continuously improve the accuracy.

---

class: left, left

### References

.small[
&lt;a name=bib-ahsanInformalHousingApproaches2010a&gt;&lt;/a&gt;[Ahsan, R. and J.
M. Quamruzzaman](#cite-ahsanInformalHousingApproaches2010a) (2010).
"Informal Housing and Approaches towards the Low-income Society in
Developing Countries".

&lt;a name=bib-akrofiSustainableUrbanDevelopment2019b&gt;&lt;/a&gt;[Akrofi, M. M.,
F. A. Avogo, and E. A.
Wedam](#cite-akrofiSustainableUrbanDevelopment2019b) (2019).
"Sustainable Urban Development and the Challenge of Unauthorized
Buildings: Assessing Demographic Drivers in Peri-Urban Areas of Ghana".
In: _Journal of Housing and the Built Environment_ 34.2, pp. 571-598.

&lt;a name=bib-bayraktarLANDREGISTRYCADASTRE2006a&gt;&lt;/a&gt;[BAYRAKTAR, S. and
S. BAKICI](#cite-bayraktarLANDREGISTRYCADASTRE2006a) (2006). _LAND
REGISTRY AND CADASTRE IN TURKEY_.

&lt;a name=bib-feliceRankingIllegalBuildings2019a&gt;&lt;/a&gt;[Felice, P.
D.](#cite-feliceRankingIllegalBuildings2019a) (2019). "Ranking of
Illegal Buildings Close to Rivers: A Proposal, Its Implementation and
Preliminary Validation". In: _ISPRS International Journal of
Geo-Information_ 8.11, p. 510.

&lt;a name=bib-hortonTurkeyEarthquakeWhy2023a&gt;&lt;/a&gt;[Horton, J. and W.
Armstrong](#cite-hortonTurkeyEarthquakeWhy2023a) (2023). "Turkey
Earthquake: Why Did so Many Buildings Collapse?" In: _BBC News_.
_Europe_.

&lt;a name=bib-rs13163150&gt;&lt;/a&gt;[Jovanović, D., M. Gavrilović, D. Sladić, et
al.](#cite-rs13163150) (2021). "Building Change Detection Method to
Support Register of Identified Changes on Buildings". In: _Remote
Sensing_ 13.16.

&lt;a name=bib-jovanovicEnvironmentalImpactIllegal2019a&gt;&lt;/a&gt;[Jovanovic,
M.](#cite-jovanovicEnvironmentalImpactIllegal2019a) (2019).
"Environmental Impact of Illegal Construction, Poor Planning and Design
in Western Balkans: A Review". In: _Global Journal of Engineering
Sciences_ 3.5.

&lt;a name=bib-Norman_2021&gt;&lt;/a&gt;[Norman, M., H. M. Shahar, Z. Mohamad, et
al.](#cite-Norman_2021) (2021). "Urban building detection using
object-based image analysis (OBIA) and machine learning (ML)
algorithms". In: _IOP Conference Series: Earth and Environmental
Science_ 620.1, p. 012010.

&lt;a name=bib-ozdemirIzmirDestinasyonuNda2018a&gt;&lt;/a&gt;[Özdemir, G. and S.
Erdoğan](#cite-ozdemirIzmirDestinasyonuNda2018a) (2018). "İzmir
Destinasyonu Nda Gastronomi Turizmi Üzerine Bir Araştırma (A Research
on Gastronomy Tourism in Destination İzmir)". In: _Journal of Tourism
and Gastronomy Studies_ 10, pp. 249-272.

&lt;a name=bib-peroldArchitectureSouthernAfrican2019a&gt;&lt;/a&gt;[Perold, R., R.
Donaldson, and O.
Devisch](#cite-peroldArchitectureSouthernAfrican2019a) (2019).
"Architecture in Southern African Informal Settlements: A Contextually
Appropriate Intervention". In: _Urbani izziv_ Supplement.30, pp.
96-111.
]

---

class: left, left

### References

.small[
&lt;a name=bib-romanoIllegalBuildingItaly2021a&gt;&lt;/a&gt;[Romano, B., F. Zullo,
L. Fiorini, et al.](#cite-romanoIllegalBuildingItaly2021a) (2021).
"Illegal Building in Italy: Too Complex a Problem for National Land
Policy?" In: _Cities_ 112, p. 103159.

&lt;a name=bib-uzunUpgradingIllegalSettlements2015a&gt;&lt;/a&gt;[Uzun, B. and N.
Celik Simsek](#cite-uzunUpgradingIllegalSettlements2015a) (2015).
"Upgrading of Illegal Settlements in Turkey; the Case of North Ankara
Entrance Urban Regeneration Project". In: _Habitat International_ 49,
pp. 157-164.

&lt;a name=bib-varolDetectionIllegalConstructions2019a&gt;&lt;/a&gt;[Varol, B., E.
Ö. Yılmaz, D. Maktav, et
al.](#cite-varolDetectionIllegalConstructions2019a) (2019). "Detection
of Illegal Constructions in Urban Cities: Comparing LIDAR Data and
Stereo KOMPSAT-3 Images with Development Plans". In: _European Journal
of Remote Sensing_ 52.1, pp. 335-344.

&lt;a name=bib-zanfiCittaAbusivaContemporary2013a&gt;&lt;/a&gt;[Zanfi,
F.](#cite-zanfiCittaAbusivaContemporary2013a) (2013). "The Città
Abusiva in Contemporary Southern Italy: Illegal Building and Prospects
for Change". In: _Urban Studies_ 50.16, pp. 3428-3445.
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "4:3"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
